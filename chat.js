!function(){var e={};function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function a(e,n){for(var a=0;a<n.length;a++){var o=n[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,c=function(e,n){if("object"!==t(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var o=a.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(c)?c:String(c)),o)}var c}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cookiesEnabled=!!navigator.cookieEnabled,this.cookiesEnabled||console.warn("Cookies are not enabled. Chat sessions will not persist between page loads.")}var t,o;return t=e,(o=[{key:"setItem",value:function(e,t){if(this.cookiesEnabled){var n=new Date,a=window.location.hostname.split("."),o="";a.length>1&&(o="".concat(a[a.length-2],".").concat(a[a.length-1])),n.setTime(n.getTime()+864e5);var c="; expires=".concat(n.toGMTString());document.cookie="".concat(e,"=").concat(t).concat(c,", domain=").concat(o,"; ck01=vl01; SameSite=None; Secure")}}},{key:"getItem",value:function(e){var t="";if(this.cookiesEnabled){var a={};document.cookie.split(";").forEach((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,o,c,i,s=[],r=!0,l=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;r=!1}else for(;!(r=(a=c.call(n)).done)&&(s.push(a.value),s.length!==t);r=!0);}catch(e){l=!0,o=e}finally{try{if(!r&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.split("="),2),o=t[0],c=t[1];a[o.trim()]=c})),t=a[e]}return t}}])&&a(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.default=o;var c,i=(c=e)&&c.__esModule?c:{default:c};function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r="",l="",d=!0,m="",p=!1,u=0,h=!1,y=new i.default,g=y.getItem("sessionKey"),f="",v=!0;if(void 0===document.currentScript||void 0===document.currentScript||null==document.currentScript||"null"===document.currentScript)for(var E=document.getElementsByTagName("script"),B=0;B<E.length;++B){var b=E[B].getAttribute("src");void 0!==b&&null!=b&&"null"!==b&&-1!==b.indexOf("sharpenChat.js")&&(f=E[B])}else f=document.currentScript;f.getAttribute("src");var I,C,k,w,x,_,N,T="".concat("https://chat.sharpen.cx","/public/sharpenChat.css"),M="",L="",S="",H="",A="",F="",W="",O="",R="",P=0,D={phonenumber:"phoneNumber",fullname:"fullName",callercity:"callerCity",callerstate:"callerState",firstname:"firstName",lastname:"lastName",companyname:"companyName",queueskills:"queueSkills",queuepoints:"queuePoints",externalcaseid:"externalCaseID",externalcrmaccountid:"externalCRMAccountID",externalcrmid:"externalCRMID",externalcrmmake:"externalCRMMake",externalcrmrecordtype:"externalCRMRecordType",externalcrmstatus:"externalCRMStatus",externalcrmcampaignid:"externalCRMCampaignID",externalcrmcampaignstatus:"externalCRMCampaignStatus",externalmarketingmake:"externalMarketingMake",externalmarketingid:"externalMarketingID"},K="https://node.sharpen.cx";function U(){null!=document.cookie&&(M=le("sharpenFirstName"),L=le("sharpenLastName"),S=le("sharpenEmail"),H=le("sharpenPhoneNumber"),A=le("sharpenCompanyName"),F=le("sharpenSFDCUserID"),W=le("sharpenSFDCAccountID"),M=decodeURIComponent(M),L=decodeURIComponent(L),S=decodeURIComponent(S),H=decodeURIComponent(H),A=decodeURIComponent(A),F=decodeURIComponent(F),W=decodeURIComponent(W)),(O=document.createElement("link")).rel="stylesheet",O.href=T,document.body.appendChild(O),(R=document.createElement("audio")).setAttribute("id","sharpenChatAudioNotification"),R.src="https://chat.sharpen.cx/public/sharpenChat.wav",document.body.appendChild(R);for(var e=[{name:"fortAwesome",url:"https://use.fonticons.com/edbab041.js"},{name:"momentjs",url:"https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.min.js"}],t=0;t<e.length;t++)(v=document.createElement("script")).src=e[t].url,"momentjs"===e[t].name?"undefined"==typeof moment&&document.head.appendChild(v):document.head.appendChild(v);var n=document.createElement("script");n.src="".concat("https://chat.sharpen.cx","/public/validator/validator.min.js"),document.head.appendChild(n);var a=document.createElement("div");a.style.display="none",a.id="sharpenChat",he(a,"light");var o='<button id="endChatBtn" class="sharpen-chat-button" type="button"><i class="sharpen-icon sharpen-icon-times secondary color"></i></button>';""!==l?(he(a,l),window.document.title="".concat(window.location.host," | Chat"),"full"==l&&(o='<button id="endChatBtn" class="sharpen-chat-button full secondary color" type="button">End Chat</button>')):he(a,"minimized"),document.body.appendChild(a);var c='<div id="openChatBtn" class="transition"><i id="mainChatIcon" class="sharpen-icon sharpen-icon-comments transition primary color" style="color: '.concat(I,'"></i><span id="chatHoverMsg" class="transition">Have a question? Chat us!</span></div>'),i='<div id="chatEntryWindow" class="transition primary background"><p>Please enter your contact info.</p><button id="nevermindBtn" class="sharpen-chat-button" type="button"><i class="sharpen-icon sharpen-icon-times secondary color"></i></button><form id="chatEntryForm">';for(i+='<div class="input-wrapper"><input type="text" name="firstName" value="'.concat(M,'"/><label><i class="sharpen-icon sharpen-icon-user secondary color"></i><span class="text-color-transparent color">First Name</span></label></div>'),i+='<div class="input-wrapper"><input type="text" name="lastName" value="'.concat(L,'"/><label><i class="sharpen-icon sharpen-icon-user secondary color"></i><span class="text-color-transparent color">Last Name</span></label></div>'),i+='<div class="input-wrapper"><input type="text" name="email" value="'.concat(S,'"/><label><i class="sharpen-icon sharpen-icon-envelope secondary color"></i><span class="text-color-transparent color">Email</span></label></div>'),i+='<div class="input-wrapper"><input type="text" name="phoneNumber" value="'.concat(H,'"/><label><i class="sharpen-icon sharpen-icon-phone secondary color"></i><span class="text-color-transparent color">Phone</span></label></div>'),i+='<input type="hidden" name="companyName" value="'.concat(A,'"/>'),i+='<input type="hidden" name="externalCRMID" value="'.concat(F,'"/>'),i+='<input type="hidden" name="externalCRMAccountID" value="'.concat(W,'"/>'),t=0;t<f.attributes.length;t++){var s=f.attributes[t];if("src"!=s.name&&"appkey"!=s.name&&"mode"!=s.name&&"type"!=s.name&&"defer"!=s.name&&"charset"!=s.name&&"async"!=s.name&&null!=s.value){var d=s.name;D[s.name]&&(d=D[s.name]),i+='<input type="hidden" name="'.concat(d,'" value="').concat(s.value,'"/>')}}i+='<button id="chatEntryBtn" class="sharpen-chat-button secondary background text-color" type="button">Enter Chat</button><span id="cancelChatEntryBtn" class="secondary color">Cancel</span></form></div>';var m='<div id="chatWindow" class="transition">';m+='<div id="chatWindowHeader" class="primary background"><button id="expandChatBtn" class="sharpen-chat-button" type="button"><i class="sharpen-icon sharpen-icon-expand secondary color"></i></button><button id="openVideoChatBtn" class="sharpen-chat-button" type="button" style="display:none !important;"><i class="sharpen-icon sharpen-icon-video-camera secondary color"></i></button><button id="hideChatBtn" class="sharpen-chat-button" type="button"><i class="sharpen-icon sharpen-icon-minus secondary color"></i></button>'.concat(o,'<p id="waitingMessage" class="text-color color"><i class="sharpen-icon sharpen-icon-comment sharpen-icon-flip-horizontal text-color-transparent color"></i> <span id="titleText">').concat(k,"</span></p></div>"),m+='<ul id="chatBlock" class="empty"></ul>',m+='<h3 id="messageLoader" class="message-status" style="display:none;"><i class="sharpen-icon sharpen-icon-circle"></i><i class="sharpen-icon sharpen-icon-circle"></i><i class="sharpen-icon sharpen-icon-circle"></i></h3>',m+='<div id="chatWindowFooter"></div>';var u="<span id='new-message-notification' class='transition secondary background text-color'></span>"+c+'<div id="chatConnectWindow" style="display: none;"><p><i class="sharpen-icon sharpen-icon-spinner sharpen-icon-spin"></i> Connecting to the server.</p></div>'+i+(m+='<form id="chatForm"><textarea id="messageBox" class="transition" name="input" placeholder="Message" maxlength="1000"></textarea><button id="sendChatBtn" class="sharpen-chat-button secondary background" type="button"><i class="sharpen-icon sharpen-icon-paper-plane" style="color: '.concat(I,' !important"></i></button><span id="linebreak-msg">(Press Shift + Enter for a line break)</span></form></div>'));document.getElementById("sharpenChat").innerHTML=u;var h=document.querySelectorAll(".input-wrapper input");for(t=0;t<h.length;t++)h[t].addEventListener("keyup",(function(){""!==this.value?he(this,"filled"):ye(this,"filled")}));var g=document.getElementById("sharpenChat").getElementsByTagName("*");for(t=0;t<g.length;t++)g[t].style.setProperty("box-sizing","inherit","important");if(p||"true"===y.getItem("inChat")){var v="";(v=document.createElement("script")).type="text/javascript",v.readyState?v.onreadystatechange=function(){"loaded"!=v.readyState&&"complete"!=v.readyState||(v.onreadystatechange=null,V())}:v.onload=function(){V()},v.src="".concat(K,"/socket.io/socket.io.js"),document.body.appendChild(v),document.getElementById("openChatBtn").addEventListener("click",G),document.getElementById("chatEntryBtn").addEventListener("click",J),document.getElementById("sendChatBtn").addEventListener("click",X),document.getElementById("hideChatBtn").addEventListener("click",Z),document.getElementById("expandChatBtn").addEventListener("click",$),document.getElementById("openVideoChatBtn").addEventListener("click",Q),document.getElementById("endChatBtn").addEventListener("click",ee),document.getElementById("messageBox").addEventListener("keypress",ce),document.getElementById("messageBox").addEventListener("keyup",ie),document.getElementById("messageBox").addEventListener("keydown",se),document.getElementById("nevermindBtn").addEventListener("click",te),document.getElementById("cancelChatEntryBtn").addEventListener("click",te),document.getElementById("sharpenChat").addEventListener("click",ne)}else{var E="".concat("https://api.sharpencx.com","/V2/sharpenChat/themes/getThemes/"),B={headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"objNameAPI=SharpenChatThemes__api&returnFieldsFull=0&query=%22%5B%7B%22col%22%3A%22key%22%2C%22operation%22%3A%22%3D%22%2C%22value%22%3A%22%22%7D%5D%22&appKeyLookup=".concat(r,"&="),method:"POST"};fetch(E,B).then((function(e){return e.json()})).then((function(e){var t=e.data.filter((function(e){return"appkey__api"===e.objFieldNameAPI&&e.value===r})),n=e.data.filter((function(e){return"primarycolor__api"===e.objFieldNameAPI&&e.key===t[0].key}));I=n[0].value,de("primary",n[0].value),document.getElementById("openChatBtn").addEventListener("click",Y)})).catch((function(e){return console.log(e)}))}}function q(){document.getElementById("chatForm").style.opacity=.5,document.getElementById("messageBox").disabled=!0,document.getElementById("sendChatBtn").disabled=!0,document.getElementById("sendChatBtn").firstChild.className="sharpen-icon sharpen-icon-spinner sharpen-icon-spin"}function z(){document.getElementById("chatForm").style.opacity=1,document.getElementById("sendChatBtn").firstChild.className="sharpen-icon sharpen-icon-paper-plane",document.getElementById("messageBox").disabled=!1,document.getElementById("sendChatBtn").disabled=!1,document.getElementById("messageBox").focus()}function V(){(m=io.connect("".concat(K,"/fathomVoice"),{secure:!0,transports:["websocket"]})).on("connect",(function(){q(),m.emit("authenticate",{appKey:r,sessionType:"chat",sessionKey:g,type:"chat"})})),m.on("set session key",(function(e){null!=e&&(g=e.sessionKey,y.setItem("sessionKey",e.sessionKey),G())})),m.on("from the queue system",(function(e){null!=e&&"agent joined"==e.socketEvent&&(document.getElementById("waitingMessage").innerHTML='<i class="sharpen-icon sharpen-icon-user"></i> You are talking with <span class="agent-name">'.concat(e.fullName,"</span>"))})),m.on("from the message system",(function(e){if(null!=e)if("messages"==e.socketEvent){if(z(),-1!==document.getElementById("chatBlock").className.indexOf("empty")){for(var t=0;t<e.messages.length;t++){var n=moment(1e3*e.messages[t].dateTimeUnix).format();if(n=moment(n).fromNow(),"in"==e.messages[t].direction)if("Graham"==e.messages[t].fullName)i="chatbot ".concat(x),s="<i class='sharpen-icon sharpen-icon-bell'></i>";else{var a=ae(e.messages[t].fullName);i="incoming",s="<span class='sharpen-icon initials' style='background: ".concat(C," !important;'>").concat(a,"</span>")}"out"==e.messages[t].direction&&(a=ae(e.messages[t].fullName),i="outgoing",s="<span class='sharpen-icon initials' style='background: ".concat(C," !important;'>").concat(a,"</span>"));var o=me(e.messages[t].text),c="<li class='row message ".concat(i,"'><div class='message-wrapper transition'>").concat(s,"<p class='message-text'>").concat(o,"<span class='dateTime'>").concat(n,"</span></p></div></li>");document.getElementById("chatBlock").innerHTML+=c,document.getElementById("messageLoader").style.display="none",null!=e.agent&&(document.getElementById("waitingMessage").innerHTML='<i class="sharpen-icon sharpen-icon-user"></i> You are talking with '.concat(e.agent.fullName),v=!1)}ue(),oe(document.getElementById("chatBlock")),ye(document.getElementById("chatBlock"),"empty")}}else if("finding agents"==e.socketEvent)v=!1,z(),document.getElementById("waitingMessage").innerHTML="<i class='sharpen-icon sharpen-icon-spinner sharpen-icon-spin'></i> ".concat(w);else if("enable form"==e.socketEvent)z();else if("received message"==e.socketEvent){var i,s;ye(document.getElementById("chatBlock"),"empty"),document.getElementById("endChatBtn").setAttribute("data-queuecallmanagerid",e.queueCallManagerID),n=moment(1e3*e.time).format(),n=moment(n).fromNow(),"in"==e.direction&&"Graham"==e.fromName?(i="chatbot ".concat(x),s="<i class='sharpen-icon sharpen-icon-bell'></i>",v=!0,null==e.exitBot&&z()):(a=ae(e.fromName),i="incoming",s="<span class='sharpen-icon initials' style='background: ".concat(C," !important;'>").concat(a,"</span>")),"out"==e.direction&&(a=ae(e.fromName),i="outgoing",s="<span class='sharpen-icon initials' style='background: ".concat(C," !important;'>").concat(a,"</span>"),P++,he(document.getElementById("sharpenChat"),"new-message"),document.getElementById("new-message-notification").innerHTML=P,0==document.hasFocus()&&(r=e.fromName,l=e.text,(_=new Notification(r,{body:l,icon:N})).onclick=function(){window.focus()},_.onerror=function(){},_.onshow=function(){},_.onclose=function(){},setTimeout((function(){_.close()}),5e3),document.getElementById("sharpenChatAudioNotification").play())),o=me(e.text),c="<li class='row message ".concat(i,"'><div class='message-wrapper transition'>").concat(s,"<p class='message-text'>").concat(o,"<span class='dateTime'>").concat(n,"</span></p></div></li>"),document.getElementById("chatBlock").innerHTML+=c,document.getElementById("messageLoader").style.display="none",ue(),oe(document.getElementById("chatBlock"))}var r,l})),m.on("from the socket system",(function(e){if(null!=e)if("session key reset"==e.socketEvent){y.setItem("inChat",null),document.getElementById("waitingMessage").innerHTML="<i class='sharpen-icon sharpen-icon-user'></i> The agent has left the room.",he(document.getElementById("chatForm"),"chat-ended");var t=document.createElement("li");he(t,"row"),he(t,"message"),he(t,"chatbot"),he(t,x);var n=document.createElement("div");he(n,"message-wrapper"),he(n,"transition");var a=document.createElement("i");he(a,"sharpen-icon"),he(a,"sharpen-icon-bell");var o=document.createElement("p");he(o,"message-text"),o.innerHTML="Your Chat Session Has Ended",n.appendChild(a),n.appendChild(o),t.appendChild(n),n.appendChild(a),document.getElementById("chatBlock").appendChild(t),-1!==document.getElementById("sharpenChat").className.indexOf("full")&&(document.getElementById("endChatBtn").style.display="")}else"set custom chat colors"==e.socketEvent?null!=e.data&&""!=e.data&&(function(e){var t=e.primarycolor__api,n=e.secondarycolor__api,a=e.textcolor__api,o=e.textopacity__api;o=2*o*.1,I=e.primarycolor__api,C=e.secondarycolor__api,"light"===a&&(a="rgba(255,255,255,",he(document.getElementById("sharpenChat"),"light")),"dark"===a&&(a="rgba(0,0,0,",he(document.getElementById("sharpenChat"),"dark")),k=void 0===e.title__api||void 0===e.title__api||null==e.title__api||"null"===e.title__api||""===e.title__api?"Welcome!":e.title__api,document.getElementById("titleText").innerHTML=k,w=void 0===e.loadingmessage__api||void 0===e.loadingmessage__api||null==e.loadingmessage__api||"null"===e.loadingmessage__api||""===e.loadingmessage__api?"Searching for agents...":e.loadingmessage__api,x=void 0===e.graham__api||void 0===e.graham__api||null==e.graham__api||"null"===e.graham__api||""===e.graham__api?"disabled":e.graham__api,void 0===e.video__api||void 0===e.video__api||null==e.video__api||"null"===e.video__api||""===e.video__api||("enabled"!==e.video__api||void 0===window.webkitRTCPeerConnection&&void 0===window.mozRTCPeerConnection||(document.getElementById("openVideoChatBtn").style.display="")),void 0===e.chattransparency__api||void 0===e.chattransparency__api||null==e.chattransparency__api||"null"===e.chattransparency__api||""===e.chattransparency__api?document.getElementById("chatWindow").style.setProperty("background","rgba(246,246,246,1)","important"):"enabled"===e.chattransparency__api?document.getElementById("chatWindow").style.setProperty("background","rgba(246,246,246,0.9)","important"):document.getElementById("chatWindow").style.setProperty("background","rgba(246,246,246,1)","important"),de("primary",t),de("secondary",n),de("text-color",a,o),de("text-color-transparent",a)}(e.data),document.getElementById("sharpenChat").style.display="",N=null!=e.data.notificationimage__api&&""!=e.data.notificationimage__api?e.data.notificationimage__api:"".concat("https://app.sharpencx.com","/images/sharpen_logo_favicon_120px.png"),N=e.data.notificationimage__api):"open chat"==e.socketEvent&&"null"!=y.getItem("inChat")&&null!=y.getItem("inChat")&&G()})),m.on("from the chatbot",(function(e){if(null!=e)if("set page view"==e.socketEvent){if("chatEntry"==e.page)""!=M&&null!=M&&""!=L&&null!=L&&""!=S&&null!=S||!d?(J(),he(document.getElementById("openChatBtn"),"expanded"),he(document.getElementById("chatWindow"),"expanded"),document.getElementById("messageBox").focus(),document.getElementById("messageLoader").style.display="none"):(he(document.getElementById("openChatBtn"),"expanded"),he(document.getElementById("chatEntryWindow"),"expanded"));else if("chatForm"==e.page)if(he(document.getElementById("openChatBtn"),"expanded"),he(document.getElementById("chatWindow"),"expanded"),ye(document.getElementById("chatEntryWindow"),"expanded"),document.getElementById("waitingMessage").innerHTML="<i class='sharpen-icon sharpen-icon-comment sharpen-icon-flip-horizontal'></i> <span id='titleText'>".concat(k,"</span>"),document.getElementById("messageBox").focus(),setTimeout((function(){oe(document.getElementById("chatBlock"))}),500),null!=e.collectInfo&&0==e.collectInfo)m.emit("send to chatbot",{socketEvent:"user input",input:""});else if(null!=e.collectInfo&&1==e.collectInfo){var t=re(document.getElementById("chatEntryForm"));null!=t.firstName&&null!=t.lastName&&(t.fullName="".concat(t.firstName," ").concat(t.lastName)),t=JSON.stringify(t),m.emit("send to chatbot",{socketEvent:"user input",input:t})}}else"typing started"==e.socketEvent?null!=e.uKey&&(document.getElementById("chatWindowFooter").innerHTML="<span>".concat(e.fullName," is typing...</span>"),he(document.getElementById("chatBlock"),"typing")):"typing stopped"==e.socketEvent&&null!=e.uKey&&setTimeout((function(){document.getElementById("chatWindowFooter").innerHTML="",ye(document.getElementById("chatBlock"),"typing")}),500)}))}function Y(){p=!0,U(),he(document.getElementById("mainChatIcon"),"sharpen-icon-spinner sharpen-icon-spin")}function G(){m.emit("send to chatbot",{socketEvent:"open chat"}),m.emit("send to socket system",{socketEvent:"set session url",url:document.URL}),ye(document.getElementById("sharpenChat"),"new-message"),setTimeout((function(){ye(document.getElementById("sharpenChat"),"minimized")}),200),P=0,ye(document.getElementById("mainChatIcon"),"sharpen-icon-comments"),ye(document.getElementById("mainChatIcon"),"sharpen-icon-commenting"),he(document.getElementById("mainChatIcon"),"sharpen-icon-spinner sharpen-icon-spin")}function J(){var e=re(document.getElementById("chatEntryForm"));null!=e.firstName&&null!=e.lastName&&(e.fullName="".concat(e.firstName," ").concat(e.lastName)),e=JSON.stringify(e),m.emit("send to chatbot",{socketEvent:"user input",input:e})}function X(){var e=document.getElementById("messageLoader"),t=re(document.getElementById("chatForm"));t.queueID="",t.socketEvent="user input",""===t.input?(e.style.display="none",console.error("The message cannot be blank. Please fill out the form and try again.")):(e.style.display="",m.emit("send to chatbot",t),document.getElementById("messageBox").value="",v&&q(),"true"!=y.getItem("inChat")&&y.setItem("inChat","true"))}function $(){var e=window.innerHeight-600,t=window.innerWidth-800,n="".concat("https://chat.sharpencx.com","/").concat(r,"/").concat(g),a="height=".concat(600,",width=").concat(800,",top=").concat(e,",left=").concat(t),o=window.open(n,"SharpenChat",a);return window.focus&&o.focus(),!1}function Q(){var e=window.innerHeight-600,t=window.innerWidth-800,n="".concat("https://video.sharpencx.com","/sharpenVideo/customer/").concat(r,"/").concat(g),a="height=".concat(600,",width=").concat(800,",top=").concat(e,",left=").concat(t),o=window.open(n,"SharpenChat",a);return window.focus&&o.focus(),!1}function Z(){he(document.getElementById("sharpenChat"),"minimized"),ye(document.getElementById("chatWindow"),"expanded"),ye(document.getElementById("chatEntryWindow"),"expanded"),document.getElementById("openChatBtn").style.display="",ye(document.getElementById("openChatBtn"),"expanded"),document.getElementById("chatHoverMsg").style.display="none",document.getElementById("chatConnectWindow").style.display="none",ye(document.getElementById("mainChatIcon"),"sharpen-icon-spinner"),ye(document.getElementById("mainChatIcon"),"sharpen-icon-spin"),he(document.getElementById("mainChatIcon"),"sharpen-icon-commenting")}function ee(){m.emit("send to chatbot",{socketEvent:"end chat session",sessionKey:g}),-1!==this.className.indexOf("full")?(document.getElementById("sharpenChat").innerHTML="<div id='chat-ended-wrapper'><h1 id='chat-ended-msg'>Your Chat Session Has Ended</h1></div>",setTimeout((function(){window.close()}),1500)):(y.setItem("inChat",null),setTimeout((function(){he(document.getElementById("sharpenChat"),"minimized")}),200),document.getElementById("chatBlock").innerHTML="",ye(document.getElementById("chatWindow"),"expanded"),ye(document.getElementById("chatEntryWindow"),"expanded"),document.getElementById("openChatBtn").style.display="",ye(document.getElementById("openChatBtn"),"expanded"),document.getElementById("chatHoverMsg").style.display="",document.getElementById("chatConnectWindow").style.display="none",ye(document.getElementById("mainChatIcon"),"sharpen-icon-spinner"),ye(document.getElementById("mainChatIcon"),"sharpen-icon-spin"),he(document.getElementById("mainChatIcon"),"sharpen-icon-comments"),P=0)}function te(){y.setItem("inChat",null),setTimeout((function(){he(document.getElementById("sharpenChat"),"minimized")}),200),ye(document.getElementById("chatWindow"),"expanded"),ye(document.getElementById("chatEntryWindow"),"expanded"),document.getElementById("openChatBtn").style.display="",ye(document.getElementById("openChatBtn"),"expanded"),document.getElementById("chatHoverMsg").style.display="",document.getElementById("chatConnectWindow").style.display="none",ye(document.getElementById("mainChatIcon"),"sharpen-icon-spinner"),ye(document.getElementById("mainChatIcon"),"sharpen-icon-spin"),he(document.getElementById("mainChatIcon"),"sharpen-icon-comments"),P=0}function ne(){-1!==document.getElementById("sharpenChat").className.indexOf("new-message")&&(ye(document.getElementById("sharpenChat"),"new-message"),P=0)}function ae(e){e=e.split(" ");for(var t="",n=0;n<e.length;n++)0!=n&&n!=e.length-1||(t+=e[n].charAt(0));return t}function oe(e){e.scrollTop=e.scrollHeight}function ce(){0==h&&m.emit("send to chatbot",{socketEvent:"typing started"}),h=!0}function ie(){var e=this;if(u&&clearTimeout(u),u=setTimeout((function(){h=!1,m.emit("send to chatbot",{socketEvent:"typing stopped",message:e.value}),document.getElementById("chatWindowFooter").innerHTML="",ye(document.getElementById("chatBlock"),"typing")}),400),this.value.length>=900){var t=1e3-this.value.length,n="<span>You have ".concat(t," characters left</span>");1==t&&(n="<span>You have ".concat(t," character left</span>")),document.getElementById("chatWindowFooter").innerHTML=n,"".concat(document.getElementById("chatBlock").className," typing")}}function se(e){ne(),13==e.which&&e.shiftKey||13==e.which&&(X(),e.preventDefault())}function re(e){var t,n={};if("object"===s(e)&&"FORM"==e.nodeName){var a=e.elements.length;for(B=0;B<a;B++)if((t=e.elements[B]).name&&!t.disabled&&"file"!=t.type&&"reset"!=t.type&&"submit"!=t.type&&"button"!=t.type)if("select-multiple"==t.type)for(j=e.elements[B].options.length-1;j>=0;j--)t.options[j].selected&&(n[encodeURIComponent(t.name)]=t.options[j].value);else("checkbox"!=t.type&&"radio"!=t.type||t.checked)&&(n[encodeURIComponent(t.name)]=t.value)}return n}function le(e){for(var t="".concat(e,"="),n=document.cookie.split(";"),a=0;a<n.length;a++){for(var o=n[a];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""}function de(e,t,n){for(var a=document.getElementsByClassName(e),o=0;o<a.length;o++)-1!==a[o].className.indexOf("background")&&a[o].style.setProperty("background",t,"important"),-1!==a[o].className.indexOf("color")&&a[o].style.setProperty("color",t,"important"),-1!==a[o].className.indexOf("text-color")&&a[o].style.setProperty("color","".concat(t+n,")"),"important"),-1!==a[o].className.indexOf("text-color-transparent")&&(n=.5,a[o].style.setProperty("opacity",n,"important"));document.getElementById("sharpenChat").style.display=""}function me(e){var t=e.split(" "),n="";for(B=0;B<t.length;B++){var a=t[B];n+=a=1==validator.isEmail(a)?"<a href='mailto:".concat(a,"' class='message-link transition' style='color:").concat(C," !important;' data-fetched='false'>").concat(a,"</a> "):1==validator.isURL(a)?a.indexOf("http")>=0||a.indexOf("https")>=0?"<a href='".concat(a,"' class='message-link transition sharpen-chat-links' target='_blank' style='color:").concat(C," !important;' data-fetched='false'>").concat(a,"</a> "):a.indexOf("www")>=0?"<a href='http://".concat(a,"' class='message-link transition sharpen-chat-links' target='_blank' style='color:").concat(C," !important;' data-fetched='false'>").concat(a,"</a> "):"".concat(a," "):"".concat(a," ")}return n}function pe(e,t,n){var a="appKeyLookup=".concat(e,"&url=").concat(encodeURIComponent(t)),o=new XMLHttpRequest;o.open("POST","".concat("https://api.sharpencx.com","/V2/embedly/extract/"),!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.onload=function(){if(200==o.status){var e=JSON.parse(o.response);n(null,e)}else n("error",o.statusText)},o.send(a)}function ue(){for(var e=document.querySelectorAll("a.sharpen-chat-links"),t=0;t<e.length;t++)!function(n){var a=e[t],o=a.getAttribute("href");"false"===a.getAttribute("data-fetched")&&(a.innerHTML="<i class='sharpen-icon sharpen-icon-spinner sharpen-icon-spin message-icon'></i>",pe(r,o,(function(e,t){if(e)a.innerHTML=o;else if("Complete"===t.status&&""!==t.data&&"error"!==t.data.type){t=t.data,a.setAttribute("href",t.url),a.setAttribute("data-fetched","true");var n=document.createElement("span");he(n,"meta-data provider"),n.innerHTML=t.provider_name;var c=document.createElement("span");he(c,"meta-data title"),c.innerHTML=t.title;var i=document.createElement("span");he(i,"meta-data description"),i.innerHTML=t.description;var s=document.createElement("span");if(he(s,"meta-data media"),null!==t.embeds&&t.embeds.length>0)s.innerHTML=t.embeds[0].html;else if(void 0!==t.media.html)s.innerHTML=t.media.html;else if("photo"===t.media.type){var r=document.createElement("img");r.setAttribute("src",t.media.url),s.appendChild(r)}a.innerHTML="",a.appendChild(n),a.appendChild(c),a.appendChild(i),a.appendChild(s),a.setAttribute("title",o)}else a.innerHTML=o;oe(document.getElementById("chatBlock"))})))}()}function he(e,t){if(-1!==e.className.indexOf(t))return!1;var n=e.className.split(" ");n.push(t);for(var a="",o=0;o<n.length;o++)""!==n[o].trim()&&(a+=" ".concat(n[o]));e.className=a}function ye(e,t){e.className=e.className.replace(t,"")}null!=f.attributes.appKey&&null!=f.attributes.appKey.value?(r=f.attributes.appKey.value,null!=f.attributes.mode&&null!=f.attributes.mode.value&&(l=f.attributes.mode.value),null!=f.attributes.chatForm&&null!=f.attributes.chatForm.value&&(d="true"==f.attributes.chatForm.value),U()):console.error("appKey is required")}();